#N canvas 199 471 858 290 10;
#X declare -stdpath grrrr;
#X obj 263 8 inlet~;
#X obj 30 173 env-follower.model \$1/env-follower;
#X obj 30 243 send.model \$1/send;
#X obj 559 160 constantq.model \$1/constantq;
#N canvas 702 506 693 254 master 0;
#X obj 72 55 j.receive \$1/env-follower/loudness;
#X obj 252 117 t b f;
#X obj 232 153 *;
#X obj 232 175 outlet;
#X obj 301 56 j.remote /master/spec;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 1 1 2 1;
#X connect 2 0 3 0;
#X connect 4 0 1 0;
#X restore 723 138 pd master;
#X floatatom 742 162 5 0 0 0 - - -, f 5;
#X obj 99 218 j.remote /master/send;
#N canvas 280 75 647 379 brightness 0;
#X obj 113 61 bang~;
#X obj 113 181 mapping/iir 5;
#X floatatom 123 141 5 0 0 0 - - -, f 5;
#X obj 124 248 j.return \$1/brightness @description "Brightness after
iir";
#X obj 113 315 spot.model \$1/brightness;
#X obj 113 223 * 100;
#X floatatom 66 250 5 0 0 0 - - -, f 5;
#X obj 165 135 j.parameter \$1/brightness/input/smoothing @type decimal
@default 5 @description "iir filter coefficient";
#X obj 267 82 loadbang;
#X msg 267 104 5;
#X obj 113 99 tID/specBrightness~ 512;
#N canvas 702 506 693 254 master 0;
#X obj 72 55 j.receive \$1/env-follower/loudness;
#X obj 303 54 j.remote /master/brightness;
#X obj 252 117 t b f;
#X obj 232 153 *;
#X obj 232 175 outlet;
#X floatatom 285 146 5 0 0 0 - - -, f 5;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 1;
#X connect 2 1 5 0;
#X connect 3 0 4 0;
#X restore 254 285 pd master;
#X obj 391 300 > 0;
#X obj 391 352 switch~;
#X obj 59 40 inlet~;
#X obj 391 325 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 391 273 j.remote /\$1/brightness/level;
#X connect 0 0 10 0;
#X connect 1 0 5 0;
#X connect 2 0 1 1;
#X connect 2 0 7 0;
#X connect 5 0 3 0;
#X connect 5 0 4 0;
#X connect 6 0 4 0;
#X connect 7 0 2 0;
#X connect 8 0 9 0;
#X connect 9 0 7 0;
#X connect 10 0 1 0;
#X connect 11 0 4 1;
#X connect 12 0 15 0;
#X connect 14 0 10 0;
#X connect 15 0 13 0;
#X connect 16 0 12 0;
#X restore 315 160 pd brightness;
#N canvas 0 22 740 377 pitch 1;
#X obj 143 87 unpack;
#X obj 188 189 mapping/iir 5;
#X obj 143 109 moses 30;
#X floatatom 262 167 5 0 0 0 - - -, f 5;
#X obj 196 218 j.return \$1/pitch @description "Tracked pitch after
iir";
#X obj 314 161 j.parameter \$1/pitch/input/smoothing @type decimal
@default 5 @description "iir filter coefficient";
#X obj 314 113 loadbang;
#X msg 314 135 5;
#X obj 73 65 fiddle~ 1024 1 1 0;
#N canvas 702 506 693 254 master 0;
#X obj 72 55 j.receive \$1/env-follower/loudness;
#X obj 252 117 t b f;
#X obj 232 153 *;
#X obj 232 175 outlet;
#X obj 301 56 j.remote /master/pitch;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 1 1 2 1;
#X connect 2 0 3 0;
#X connect 4 0 1 0;
#X restore 299 284 pd master;
#X floatatom 321 312 5 0 0 0 - - -, f 5;
#X obj 188 306 spot.model \$1/pitch;
#X obj 73 30 inlet~;
#X obj 415 360 switch~ 512 1 0.25;
#X obj 415 318 > 0;
#X obj 415 340 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 415 295 j.receive /\$1/pitch/level;
#X obj 188 134 mapping/resample 50;
#X floatatom 198 156 5 0 0 0 - - -, f 5;
#X connect 0 0 2 0;
#X connect 1 0 11 0;
#X connect 1 0 4 0;
#X connect 2 1 17 0;
#X connect 3 0 1 1;
#X connect 3 0 5 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 8 2 0 0;
#X connect 9 0 10 0;
#X connect 9 0 11 1;
#X connect 12 0 8 0;
#X connect 14 0 15 0;
#X connect 15 0 13 0;
#X connect 16 0 14 0;
#X connect 17 0 18 0;
#X connect 17 0 1 0;
#X restore 438 160 pd pitch;
#X connect 0 0 1 0;
#X connect 0 0 3 0;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 4 0 3 1;
#X connect 4 0 5 0;
#X connect 6 0 2 1;
